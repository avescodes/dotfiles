<html lang="en">
<head>
<title>Presence alerts - jabber.el manual 0.7.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="jabber.el manual 0.7.1">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Customizing-alerts.html#Customizing-alerts" title="Customizing alerts">
<link rel="prev" href="Standard-alerts.html#Standard-alerts" title="Standard alerts">
<link rel="next" href="Message-alerts.html#Message-alerts" title="Message alerts">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for jabber.el, version 0.7.1.

Copyright (C) 2004, 2005, 2006, 2007 Magnus Henoch, Tom Berger.

     Permission is granted to make and distribute verbatim copies or
     modified versions of this manual, provided the copyright notice and
     this permission notice are preserved on all copies.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Presence-alerts"></a>Next:&nbsp;<a rel="next" accesskey="n" href="Message-alerts.html#Message-alerts">Message alerts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Standard-alerts.html#Standard-alerts">Standard alerts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Customizing-alerts.html#Customizing-alerts">Customizing alerts</a>
<hr><br>
</div>

<h4 class="subsection">15.6.2 Presence alerts</h4>

<p><a name="index-jabber_002dalert_002dpresence_002dmessage_002dfunction-211"></a><a name="index-jabber_002dpresence_002ddefault_002dmessage-212"></a>
Set <code>jabber-alert-presence-message-function</code> to your desired
function.  This function should look like:

<pre class="example">     (defun <var>function</var> (<var>who</var> <var>oldstatus</var> <var>newstatus</var> <var>statustext</var>)
        ...
        )
</pre>
   <p><var>who</var> is the JID symbol (see <a href="Roster-structure.html#Roster-structure">Roster structure</a>),
<var>oldstatus</var> and <var>newstatus</var> are the previous and current
stati, respectively, and <var>statustext</var> is the status message if
provided, otherwise nil.

   <p><var>newstatus</var> can also be one of <code>"subscribe"</code>,
<code>"subscribed"</code>, <code>"unsubscribe"</code> and <code>"unsubscribed"</code>.

   <p>The default function, <code>jabber-presence-default-message</code>, returns
<code>nil</code> if <var>oldstatus</var> and <var>newstatus</var> are the same, and in
other cases constructs a message from the given data.

   <p>All presence alert hooks take the same arguments plus the additional
<var>proposed-alert</var>, which is the result of the specified message
function.  This last argument is usually the only one they use.

   </body></html>

