<html lang="en">
<head>
<title>Message history - jabber.el manual 0.7.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="jabber.el manual 0.7.1">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Useful-features.html#Useful-features" title="Useful features">
<link rel="next" href="Message-events.html#Message-events" title="Message events">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for jabber.el, version 0.7.1.

Copyright (C) 2004, 2005, 2006, 2007 Magnus Henoch, Tom Berger.

     Permission is granted to make and distribute verbatim copies or
     modified versions of this manual, provided the copyright notice and
     this permission notice are preserved on all copies.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Message-history"></a>Next:&nbsp;<a rel="next" accesskey="n" href="Message-events.html#Message-events">Message events</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Useful-features.html#Useful-features">Useful features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr><br>
</div>

<h2 class="chapter">11 Message history</h2>

<p><a name="index-History-126"></a><a name="index-Backlog-127"></a><a name="index-Rotation-128"></a><a name="index-jabber_002dhistory_002denabled-129"></a><a name="index-jabber_002dglobal_002dhistory_002dfilename-130"></a><a name="index-jabber_002duse_002dglobal_002dhistory-131"></a><a name="index-jabber_002dhistory_002ddir-132"></a><a name="index-jabber_002dhistory_002denable_002drotation-133"></a><a name="index-jabber_002dhistory_002dsize_002dlimit-134"></a><a name="index-jabber_002dbacklog_002dnumber-135"></a><a name="index-jabber_002dbacklog_002ddays-136"></a>
If you want a record of messages sent and received, set
<code>jabber-history-enabled</code> to t.  By default all messages to will
be saved to a global history file specified by
<code>jabber-global-history-filename</code>
(<span class="file">~/.jabber_global_message_log</span> by default).  If you prefer to
store your chats' history in per-contact files, you can set the
<code>jabber-use-global-history</code> variable to <code>nil</code>.  When using
per-contact history, files are named by the contact JID and saved
under the directory specified by the variable
<code>jabber-history-dir</code> (default is <span class="file">~/.emacs-jabber</span>).

   <p>There is no facility for reading old messages yet, but just reading
the file as text should be enough for many purposes.

   <p>When you open a new chat buffer and have entries in your history file,
the last few messages you recently exchanged with the contact in
question will be inserted.  You can control how many messages with
<code>jabber-backlog-number</code> (by default 10), and how old messages
with <code>jabber-backlog-days</code> (by default 3 days).

   <p>If you worry about your history file(s) size, you can enable history
rotation feature by setting the variable
<code>jabber-history-enable-rotation</code> to <code>t</code> (default is
<code>nil</code>).  This feature &ldquo;rotates&rdquo; your history files according to
the following rule: When <code>jabber-history-size-limit</code> (in
kilobytes) is reached, the history file is renamed to
&lt;history-file&gt;-&lt;number&gt;, where &lt;number&gt; is 1 or the smallest number
after the last rotation.  For example, suppose you set the
<code>jabber-history-size-limit</code> variable to 512 and you chat with
your buddy foo@jabber.server using the per-contact strategy to store
history files.  So, when the history file (<span class="file">foo@jabber-server</span>)
reaches 512K bytes, it will be renamed to <span class="file">foo@jabber-server-1</span>
and <span class="file">foo@jabber-server</span> will be set empty. Next time
<span class="file">foo@jabber-server</span> grows to 512K bytes, it will be saved as
<span class="file">foo@jabber-server-2</span> and so on.  Although the example was
presented with the per-contact history file strategy, history rotation
works for both per-contact and global history logging strategies.

   </body></html>

