<html lang="en">
<head>
<title>Extending service discovery - jabber.el manual 0.7.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="jabber.el manual 0.7.1">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Hacking-and-extending.html#Hacking-and-extending" title="Hacking and extending">
<link rel="prev" href="Sending-new-requests.html#Sending-new-requests" title="Sending new requests">
<link rel="next" href="Chat-printers.html#Chat-printers" title="Chat printers">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for jabber.el, version 0.7.1.

Copyright (C) 2004, 2005, 2006, 2007 Magnus Henoch, Tom Berger.

     Permission is granted to make and distribute verbatim copies or
     modified versions of this manual, provided the copyright notice and
     this permission notice are preserved on all copies.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Extending-service-discovery"></a>Next:&nbsp;<a rel="next" accesskey="n" href="Chat-printers.html#Chat-printers">Chat printers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Sending-new-requests.html#Sending-new-requests">Sending new requests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Hacking-and-extending.html#Hacking-and-extending">Hacking and extending</a>
<hr><br>
</div>

<h3 class="section">16.5 Service discovery</h3>

<p><a name="index-jabber_002dadvertised_002dfeatures-240"></a><a name="index-jabber_002ddisco_002ditems_002dnodes-241"></a><a name="index-jabber_002ddisco_002dinfo_002dnodes-242"></a><a name="index-jabber_002dmy_002djid_002dp-243"></a>
Your new handlers will likely want to advertise their existence
through service discovery.

   <p>To have an additional feature reported in response to disco info
requests, add a string to <code>jabber-advertised-features</code>.

   <p>By default, the service discovery functions reject all requests
containing a node identifier with an &ldquo;Item not found&rdquo; error.  To
make them respond, add the appropriate entries to
<code>jabber-disco-items-nodes</code> and <code>jabber-disco-info-nodes</code>. 
Both variables work in the same way.  They are alists, where the keys
are the node names, and the values are lists of two items.

   <p>The first item is the data to return &mdash; either a list or a function
taking the entire IQ stanza and returning a list, this list containing
the XML nodes to include in the <code>&lt;query/&gt;</code> node in the response.

   <p>The second item is the access control function.  An access control
function receives the JID as its only argument, and returns non-nil if
access is to be granted.  If nil is specified instead of a function,
access is always granted.  One such function is provided,
<code>jabber-my-jid-p</code>, which grants access for JIDs where the
username and server (not necessarily resource) are equal to those of
the user.

   </body></html>

